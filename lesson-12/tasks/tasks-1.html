<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>

<body>
	<h1>. Описати масив об’єктів – сайтів розроблених компанією з такими властивостями
	</h1>
	<script>
		/*
		----- Властивості ------
		назва компанії на час розробки (назву періодично змінюють)
		власник компанії
		споснсори (масив спонсорів)
						 * прізвище спонсора
				* ім’я  спонсора
				* сума вкладень спонсора
		рік випуску
		вартість сайту*/
		let objectArr = [
			{
				companyName: 'Lays',
				companyOwner: 'Vasya',
				sponsors: [
					{
						surname: 'Ivanov',
						name: 'Ivan',
						investSum: 5000,
					},
					{
						surname: 'Melnik',
						name: 'Oleg',
						investSum: 10000,
					},
				],
				year: 2000,
				sitePrice: 5000,
			},
			{
				companyName: 'Lux',
				companyOwner: 'Petro',
				sponsors: [
					{
						surname: 'Maren',
						name: 'Dima',
						investSum: 7000,
					},
					{
						surname: 'Karen',
						name: 'Andrew',
						investSum: 10000,
					},
				],
				year: 1990,
				sitePrice: 70000,
			},
			{
				companyName: 'Pringles',
				companyOwner: 'Adam',
				sponsors: [
					{
						surname: 'Jobs',
						name: 'Steve',
						investSum: 10000,
					},
					{
						surname: 'Markus',
						name: 'Valeriy',
						investSum: 400000,
					},
				],
				year: 2005,
				sitePrice: 100000,
			}
		]
		//---------------1) загальну вартість усіх сайтів
		let totalPrice = objectArr.reduce(
			(prevPrice, price) => prevPrice + price.sitePrice,
			0
		)
		document.write(`Загальна вартість усіх сайтів: ${totalPrice} <br>`)
		//----------------2) кількість сайтів, що було зроблено між 2000 та 2009 рр.

		let amountSiteYear = objectArr.reduce(
			(prevYear, years) => years.year >= 2000 && years.year <= 2009 ? prevYear + 1 : prevYear,
			0
		)
		document.write(`кількість сайтів, що було зроблено між 2000 та 2009 рр.: ${amountSiteYear} <br>`)
		//---------------3) кількість сайтів, де сума спонсорських вкладень була більшою за 100000
		let sponsorsSumMoreThan100000 = objectArr.reduce(
			(prevCount, site) => {
				let sponsorsSum = site.sponsors.reduce(
					(site, sponsors) => site + sponsors.investSum,
					0
				)
				return sponsorsSum >= 100000 ? prevCount + 1 : prevCount
			},
			0
		)
		document.write(`кількість сайтів, де сума спонсорських вкладень була більшою за 100000: ${sponsorsSumMoreThan100000} <br>`)
		//-----------4) створити загальний список усіх спонсорів (поки можуть повторюватись, просто зібрати усі у масив)
		function getSponsorsList(objectArr) {
			let sponsorsList = []

			for (const key of objectArr) {
				for (const sponsor of key['sponsors']) {
					sponsorsList.push(sponsor['surname'] + ' ' + sponsor['name'])
				}
			}
			return sponsorsList
		}
		document.write(`створити загальний список усіх спонсорів : ${getSponsorsList(objectArr)} <br>`)
		//-------------5) знайти рік, коли прибуток був найбільшим
		function getMaxSitePriceYear(objectArr) {
			let maxSitePriceYear
			let maxSitePrice = -Infinity;

			for (const company of objectArr) {
				if (company.sitePrice > maxSitePrice) {
					maxSitePrice = company.sitePrice;
					maxSitePriceYear = company.year;
				}
			}

			return maxSitePriceYear;
		}
		const maxYear = getMaxSitePriceYear(objectArr);
		document.write('Рік з максимальною сумою : ', maxYear);
		//------------6) упорядкувати список за спаданням прибутку
		let sortList = objectArr.sort((site1, site2) => site2.sitePrice - site1.sitePrice)
		console.log(sortList)
		//---------Створити 2 окремих списки з копіями об’єктів, що містять сайти з вартість до 10000 і більше 10000
		function getListObjThanMore10000(objectArr) {
			let listObjThanMore10000 = [];

			for (let i = 0; i < objectArr.length; i++) {
				if (objectArr[i].sitePrice > 10000) {
					listObjThanMore10000.push({ ...objectArr[i] });
				}
			}

			return listObjThanMore10000;
		}
		console.log(getListObjThanMore10000(objectArr))
		function getListObjThanLess10000(params) {
			let listObjThanLess10000 = [
			]
			for (let i = 0; i < objectArr.length; i++) {
				if (objectArr[i].sitePrice < 10000) {
					listObjThanLess10000.push({ ...objectArr[i] });
				}
			}
			return listObjThanLess10000;
		}
		console.log(getListObjThanLess10000(objectArr))




	</script>
</body>

</html>